<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <title>Guilda - Aden RPG</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="mines.css" />
    <link rel="stylesheet" href="guild.css" />
</head>
<body>

    <div id="playerTopBar">
        <a href="index.html?refresh=true" class="top-bar-link" title="Voltar">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
        </a>
       <div> <span id="pageTitle">Guilda</span></div>
        <a href="#" class="top-bar-link" id="refreshBtn" title="Recarregar">
            <img src="https://aden-rpg.pages.dev/assets/refresh.webp" alt="Recarregar" style="width:30px; height:30px;">
        </a>
    </div>

    <div id="mainContainer">
        <div id="tabMenu">
            <span class="tab-btn active" data-tab="guilda">Guilda</span>
            <span class="tab-btn" data-tab="taverna">Taverna</span>
            <span class="tab-btn" data-tab="ranking">Ranking</span>
            <span class="tab-btn" data-tab="boss">Boss</span>
            <span class="tab-btn" data-tab="batalhas">Batalhas</span>
        </div>

        <div id="tabContent">
            <div id="guilda" class="tab-pane active">
                <div id="guildInfoContainer" style="display:none;">
                    <div id="guildInfoHeader" style="display:flex; justify-content:space-between; align-items:center;">
                        <h3>Informações da Guilda</h3>
                        <button id="editGuildBtn" class="action-btn small" style="display:none;">Editar</button>
                    </div>
                    <div id="guildName"></div>
                    <div id="guildMemberCount"></div>
                    <div id="guildLevel">
                        <span>Nível <span id="guildLevelValue"></span></span>
                        <div class="xp-bar-container">
                            <div class="xp-bar-fill" id="guildXpFill"></div>
                        </div>
                    </div>
                    <div class="member-list-container">
                        <h4>Membros</h4>
                        <ul id="guildMemberList"></ul>
                    </div>
                </div>
                <div id="noGuildContainer" style="display:none;">
                    <p>Você não faz parte de uma guilda.</p>
                    <button class="action-btn" id="searchGuildBtn">Buscar Guilda</button>
                    <button class="action-btn" id="createGuildBtn">Criar Guilda</button>
                </div>
            </div>

            <div id="taverna" class="tab-pane">
                <p>Conteúdo da Taverna será adicionado aqui.</p>
            </div>

            <div id="ranking" class="tab-pane">
                <h3>Ranking das Guildas (Top 100)</h3>
                <ul id="guildRankingList"></ul>
            </div>

            <div id="boss" class="tab-pane">
                <p>Conteúdo do Boss será adicionado aqui.</p>
            </div>

            <div id="batalhas" class="tab-pane">
                <p>Conteúdo de Batalhas será adicionado aqui.</p>
            </div>
        </div>
    </div>

    <div id="createGuildModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Criar Nova Guilda</h3>
            <p>Custo: <strong class="crystals-cost">2000</strong> Cristais</p>
            <p>Nível Mínimo: <strong class="level-min">10</strong></p>
            <input type="text" id="newGuildNameInput" placeholder="Nome da Guilda" maxlength="25">
            <button id="confirmCreateGuildBtn" class="action-btn">Criar</button>
            <p id="createGuildMessage" class="message"></p>
        </div>
    </div>

    <div id="editGuildModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Editar Guilda</h3>
            
            <label>Nome da Guilda (1x a cada 30 dias):</label>
            <input type="text" id="editGuildName" maxlength="25">
            <p id="editNameInfo" class="message"></p>
            
            <label>Descrição:</label>
            <textarea id="editGuildDescription"></textarea>
            
            <label>Bandeira (URL):</label>
            <input type="text" id="editGuildFlagUrl" placeholder="https://...">

            <button id="saveGuildChangesBtn" class="action-btn">Salvar Alterações</button>

            <h4>Gerenciar Membros</h4>
            <ul id="manageMembersList"></ul>

            <h4>Solicitações Pendentes</h4>
            <ul id="guildRequestsList"></ul>
        </div>
    </div>

    <div id="searchGuildModal" class="modal" style="display:none;">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h3>Buscar Guilda</h3>
        <input type="text" id="searchGuildInput" placeholder="Nome da guilda...">
        <button id="searchGuildConfirmBtn" class="action-btn">Buscar</button>
        <ul id="searchGuildResults"></ul>
      </div>
    </div>

    <script src="guild.js"></script>
</body>
</html>