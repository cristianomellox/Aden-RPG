<!DOCTYPE html>

<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta name="robots" content="noindex, nofollow">
<meta name="googlebot" content="noindex, nofollow">
<title>Aden RPG</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="maintenance.js"></script>
<link href="style.css" rel="stylesheet"/>
</head>
<body>
<div id="playerTopBar">
<div id="playerAvatarContainer">
<img alt="Avatar" id="playerAvatar" src=""/>
<span id="playerLevel">Nv. 1</span>
</div>
<div id="playerTopInfo">
<div id="playerNameRow">
<span id="playerNameText">Nome</span>
<img alt="Editar" id="editProfileIcon" src="https://aden-rpg.pages.dev/edit_peefil.webp"/>
</div>
<div id="playerEmblemsRow">
<div id="playerCombatPower">
<img alt="poder" id="cpIcon" src="https://aden-rpg.pages.dev/assets/CPicon.webp"/> <span id="playerPower">0</span></div>
</div>
<div id="playerStatsRow">
<div id="playerGold"><img src="https://aden-rpg.pages.dev/assets/goldcoin.webp" style="width: 17px; height: 17px"> 0</div>
<div id="playerCrystals"><img src="https://aden-rpg.pages.dev/assets/cristais.webp" style="width: 17px; height: 17px"> 0</div></div>
<div id="emblemas">
<span class="emblema">üëë</span>
<span class="emblema">‚öîÔ∏è Ô∏è </span>
<span class="emblema">üèÖÔ∏è </span>
<span class="emblema">üõ°Ô∏è </span>
</div>
<div id="xpBarContainer">
<div id="xpBar"></div>
<div id="xpText">0 / 100</div>
</div>
</div>
</div>
<div id="authContainer">
<div id="caixaLogin">
<h2>Login / Cadastro</h2>
<input id="emailInput" placeholder="Seu e-mail" type="email"/>
<input id="passwordInput" placeholder="Sua senha" type="password"/>
<div id="otpInputContainer" style="display:none;">
<input id="otpInput" placeholder="C√≥digo de confirma√ß√£o" type="text"/>
<button id="verifyOtpBtn">Confirmar C√≥digo</button>
</div>
<div id="btnReg">
<button id="signInBtn">Entrar</button>
<button id="signUpBtn">Registrar</button>
</div>
<a style="background-color: rgba(51, 51, 51, 0.8); color: white; border-radius: 5px; position: flex; width: 85vw;" href="#" id="forgotPasswordLink">Esqueceu a senha?</a>

<div id="forgotPasswordModal" class="modal-container" style="display: none;">
    <div class="modal-content">
        <h2>Recupera√ß√£o de Senha</h2>
        <p>Insira seu e-mail para receber o c√≥digo de recupera√ß√£o.</p>
        <input type="email" id="forgotPasswordEmailInput" placeholder="Seu e-mail" required>
        <button id="sendRecoveryCodeBtn">Enviar C√≥digo</button>
        <button id="closeForgotPasswordModalBtn">Fechar</button>
        <p id="forgotPasswordMessage"></p>
    </div>
</div>

<div id="verifyRecoveryModal" class="modal-container" style="display: none;">
    <div class="modal-content">
        <h2>Verificar C√≥digo</h2>
        <p>Digite o c√≥digo de recupera√ß√£o que foi enviado para o seu e-mail e sua nova senha. Se voc√™ n√£o recebeu, verifique a caixa de spam do e-mail.</p>
        <input type="email" id="recoveryEmailDisplay" placeholder="E-mail" required readonly>
        <input type="text" id="recoveryCodeInput" placeholder="C√≥digo de 6 d√≠gitos" required>
        <input type="password" id="newPasswordInput" placeholder="Nova senha" required>
        <button id="updatePasswordBtn">Atualizar Senha</button>
        <button id="closeVerifyRecoveryModalBtn">Fechar</button>
        <p id="verifyRecoveryMessage"></p>
    
</div></div>
<p id="authMessage"></p>
 <p style="background-color: rgba(51, 51, 51, 0.8); text-align: justify; border-radius: 5px; position: flex; width: 85vw;">Ao se registrar voc√™ concorda com os Termos de Uso e Pol√≠tica de Privacidade.</p>
</div>
</div>
<div id="welcomeContainer" style="display:none; padding: 55px; margin-top: -30px;">
<center><h3>Bem-vindo(a) de volta, Aventureiro(a)!</h3></center>
<p>Prepare-se para novas aventuras em Aden!</p>
<p>Clique nos bot√µes do menu abaixo para explorar.</p>
</div>
<div id="playerInfoDiv" style="display:none;">
<h2>Informa√ß√µes do Jogador</h2>
</div>

<div id="chatContainer" style="display:none;">
<h2>Chat Global</h2>
<div id="chatBox"></div>
<input id="chatInput" placeholder="Digite sua mensagem..." type="text"/>
<button id="sendChatBtn">Enviar</button>
</div>
<div id="profileEditModal">
<div>
    <h2>Bem-vindo(a), Aventureiro(a)!</h2>
    <label for="editPlayerName">Nome do Jogador:</label><br/>
    <input id="editPlayerName" placeholder="Seu nome de aventureiro" type="text"/><br/>
    <label for="editPlayerFaction">Escolha sua Fac√ß√£o:</label><br/>
    <select id="editPlayerFaction">
        <option value="Alian√ßa da Floresta">Alian√ßa da Floresta</option>
        <option value="Guerreiros do Gelo">Guerreiros do Gelo</option>
        <option value="Sentinelas do Fogo">Sentinelas do Fogo</option>
        <option value="Horda Sombria">Horda Sombria</option>
    </select><br/>

    <label>Escolha seu Avatar:</label><br/>
    <div class="avatar-grid" id="avatarSelection"></div>
    <input id="selectedAvatarUrl" type="hidden"/>

    <label for="editPlayerCustomAvatarUrl">Ou use uma URL personalizada:</label><br/>
    <input id="editPlayerCustomAvatarUrl" placeholder="https://exemplo.com/imagem.png" type="text"/><br />
    <p id="profileEditMessage"></p>
    <button id="saveProfileBtn">Salvar Perfil</button>
    <button id="closeProfileModalBtn">Fechar</button>
</div>
</div>
<div id="footerMenu" style="display:none;">
<button id="homeBtn">In√≠cio</button> <button id="guildBtn" onclick="window.location.href='guild.html';">Guilda</button>
<button id="pvpBtn">PvP</button>
<button id="afkBtn" onclick="window.location.href='afk.html';">AFK</button>
<button id="miningBtn" onclick="window.location.href='mines.html';">Minera√ß√£o</button>
<button id="castlesBtn">Castelos</button>
</div>
<div id="chatBubble" style="display:none;">
        üí¨
    </div>
<div id="floatingMessage"></div>
<div id="combatDamagePopup">
<span id="popupDamageAmount"></span>
</div>
<div id="combatResultModal">
<div>
<h2 id="combatResultTitle"></h2>
<p id="combatResultMessage"></p>
<button id="confirmCombatResultBtn">Confirmar</button>
</div>
</div>

<!-- MENU LATERAL DIREITO (LOSANGOS) -->
<div id="sideMenu">
  <div class="menu-item" data-modal="espiralModal">
    <div class="diamond">
      <img src="https://aden-rpg.pages.dev/assets/iconespiral.webp" alt="Espiral">
    </div>
    <span>Espiral</span>
  </div>

  <div class="menu-item" data-modal="lojaModal">
    <div class="diamond">
      <img src="https://aden-rpg.pages.dev/assets/iconloja.webp" alt="Loja">
    </div>
    <span>Loja</span>
  </div>

  <div class="menu-item" data-modal="bolsaModal">
    <div class="diamond">
      <img src="https://aden-rpg.pages.dev/assets/iconbolsa.webp" alt="Bolsa">
    </div>
    <span>Bolsa</span>
  </div>

  <div class="menu-item" data-modal="pvModal">
    <div class="diamond">
      <img src="https://aden-rpg.pages.dev/assets/iconpv.webp" alt="PV">
    </div>
    <span>PV</span>
  </div>

  <!-- Grupo Miss√µes -->
  <div class="menu-item expandable" id="missionsBtn">
    <div class="diamond">
      <img src="https://aden-rpg.pages.dev/assets/iconmissao.webp" alt="Miss√µes">
    </div>
    <span>Miss√µes</span>
  </div>
  <div class="submenu" id="missionsSubmenu" style="border-right: 2px solid: #777;">
    <div class="menu-item" data-modal="tarefasModal">
      <div class="diamond small">
        <img src="https://aden-rpg.pages.dev/assets/icontarefa.webp" alt="Tarefas">
      </div>
      <span>Tarefas</span>
    </div>
    <div class="menu-item" data-modal="conquistasModal">
      <div class="diamond small">
        <img src="https://aden-rpg.pages.dev/assets/iconconquista.webp" alt="Conquistas">
      </div>
      <span>Conquistas</span>
    </div>
  </div>

  <!-- Grupo Mais -->
  <div class="menu-item expandable" id="moreBtn">
    <div class="diamond">
      <img src="https://aden-rpg.pages.dev/assets/iconmais.webp" alt="Mais">
    </div>
    <span>Mais</span>
  </div>
  <div class="submenu" id="moreSubmenu">
    <div class="menu-item" data-modal="comercioModal">
      <div class="diamond small">
        <img src="https://aden-rpg.pages.dev/assets/iconcomercio.webp" alt="Com√©rcio">
      </div>
      <span>Com√©rcio</span>
    </div>
    <div class="menu-item" data-modal="rankingModal">
      <div class="diamond small">
        <img src="https://aden-rpg.pages.dev/assets/iconranking.webp" alt="Ranking">
      </div>
      <span>Ranking</span>
    </div>
    <div class="menu-item" data-modal="petsModal" style="display: none;">
      <div class="diamond small">
        <img src="https://aden-rpg.pages.dev/assets/icons/pets.webp" alt="Pets">
      </div>
      <span>Pets</span>
    </div>
  </div>
</div>

<!-- MODAIS PADR√ÉO -->
<div id="genericModal" class="modal-container" style="display:none;">
  <div class="modal-content">
    <h2 id="modalTitle"></h2>
    <p id="modalMessage"></p>
    <button id="closeGenericModal">Fechar</button>
  </div>
</div>



<div id="spiralModal" class="modal-container" style="display:none;">
  <div class="modal-content">
    <div class="spiral-tabs">
      <button class="tab-btn active" data-tab="common">Espiral Comum</button>
      <button class="tab-btn" data-tab="advanced">Espiral Avan√ßado</button>
    </div>

    <div id="common-spiral" class="spiral-content">
      <h2>Espiral Comum</h2>
      <p>Use <span style="color: gold;">Cart√£o de Espiral Comum</span> para sortear fragmentos de equipamentos R.</p>
      <div style="width:300px; height:180px;"></div>
      <div class="card-info">
        <img src="https://aden-rpg.pages.dev/assets/itens/cartao_de_espiral_comum.webp" alt="Cart√£o Comum" style="width:60px; height:60px;">
        <span id="commonCardCount" style="margin-left: -10px;">x 0</span>
        <button id="buyCommonCardBtn" class="plus-btn" style="width: 32px;
  height: 32px;
  border-radius: 60%;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: 3px;
  font-size: 30px;
  font-weight: bold;
  padding: 0;
  margin-left: 6px; margin-left: -7px;">+</button>
      </div>
      <button id="drawCommonBtn" class="draw-btn">Sortear</button>
    </div>

    <div id="advanced-spiral" class="spiral-content" style="display:none;">
      <h2>Espiral Avan√ßado</h2>
      <p>Use <span style="color: gold;">Cart√£o de Espiral Avan√ßado</span> para sortear fragmentos de equipamentos SR.</p>
      <div style="width:300px; height:180px;"></div>
      <div class="card-info">
        <img src="https://aden-rpg.pages.dev/assets/itens/cartao_de_espiral_avancado.webp" alt="Cart√£o Avan√ßado" style="width:60px; height:60px;">
        <span id="advancedCardCount" style="margin-left: -10px;">x 0</span>
      </div>
      <button id="drawAdvancedBtn" class="draw-btn">Sortear</button>
    </div>
    
    <button class="close-spiral-modal">Fechar</button>
  </div>
</div>

<div id="buyCardsModal" class="modal-container" style="display:none;">
    <div class="modal-content">
        <h2>Comprar Cart√µes</h2>
        <p>Cada Cart√£o de Espiral Comum custa 250 Cristais.</p>
        <div class="quantity-selector">
            <button id="decreaseCardQtyBtn">-</button>
            <span id="cardQtyToBuy">1</span>
            <button id="increaseCardQtyBtn">+</button>
        </div>
        <p>Custo Total: <img src="https://aden-rpg.pages.dev/assets/cristais.webp" style="width:28px; height:30px; vertical-align: -9px;"> <span id="totalCrystalCost">250</span></p>
        <button id="confirmPurchaseBtn">Confirmar Compra</button>
        <button id="closeBuyCardsModalBtn">Cancelar</button>
        <p id="buyCardsMessage"></p>
    </div>
</div>

<div id="drawConfirmModal" class="modal-container" style="display:none;">
    <div class="modal-content">
        <h2>Confirmar Sorteio</h2>
        <p>Quantos sorteios voc√™ deseja fazer?</p>
        <input type="number" id="drawQuantityInput" value="1" min="1" style="width: 80%; text-align: center; font-size: 1.2em;">
        <button id="confirmDrawBtn">Sortear</button>
        <button id="closeDrawConfirmModalBtn">Cancelar</button>
        <p id="drawConfirmMessage"></p>
    </div>
</div>

<div id="drawResultsModal" class="modal-container" style="display:none;">
    <div class="modal-content">
        <h2>Resultados do Sorteio</h2>
        <div id="drawResultsGrid" class="results-grid">
            </div>
        <button id="closeDrawResultsModalBtn">Fechar</button>
    </div>
</div>




<script src="script.js"></script>

<script src="number_format.js"></script>
<div class="modal" id="playerInfoModal" style="display: none;">
<div class="modal-content">
<h2>Informa√ß√µes do Jogador</h2>
<div id="modalPlayerInfoContent"></div>
<button id="closePlayerInfoBtn">Fechar</button>
</div>
</div>
<div id="loading-overlay">
  <div id="loading-container">
    <h2>Carregando...</h2>
    <div id="progress-bar-container">
      <div id="progress-bar"></div>
    </div>
    <span id="progress-text">0%</span>
  </div>
</div>


<div id="maintenance-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); color: white; z-index: 9999; justify-content: center; align-items: center; text-align: center; flex-direction: column; font-family: Arial, sans-serif;">
    <img src="https://aden-rpg.pages.dev/assets/config.webp" alt="Manuten√ß√£o" style="width: 120px; height: 120px; margin-bottom: 20px;">
    <h1 id="maintenance-title">Aviso de Manuten√ß√£o</h1>
    <p id="maintenance-message" style="font-size: 1.2em; max-width: 80%;"></p>
    <p style="font-size: 0.9em; margin-top: 20px;">Obrigado pela sua paci√™ncia.</p>
</div>
<div id="countdown-banner" style="display: none; position: fixed; top: 0; left: 0; width: 100%; padding: 10px; background-color: rgba(0, 0, 0, 0.9); color: white; text-align: center; z-index: 9999; font-family: Arial, sans-serif; box-shadow: 0 4px 8px rgba(0,0,0,0.3); font-weight: bold;">
    <div style="font-size: 1.5em; font-weight: bold;">
        <span id="countdown-timer"></span>
    </div>
    <div style="font-size: 0.9em; margin-top: 5px;">
        O servidor entrar√° em manuten√ß√£o dentro de instantes. Por favor, n√£o inicie alguma opera√ß√£o no jogo para n√£o ter risco de perda de dados. Obrigado pela paci√™ncia!
    </div>
</div>
<script src="loading.js"></script>
<script src="perfil_edit.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // cria um elemento para medir o tamanho real de 1rem
  const testEl = document.createElement("div");
  testEl.style.cssText = "position:absolute;visibility:hidden;font-size:1rem;line-height:1;";
  testEl.textContent = "M";
  document.body.appendChild(testEl);

  const actualRem = testEl.getBoundingClientRect().height;
  document.body.removeChild(testEl);

  console.log("[scale-lock] 1rem real:", actualRem, "px");

  // queremos sempre 16px como base (modo padr√£o)
  const targetRem = 16;
  const correction = targetRem / actualRem;

  const style = document.createElement("style");
  style.textContent = `
    html { font-size: ${16 * correction}px !important; }
    body { font-size: 1.3rem !important; }
  `;
  document.head.appendChild(style);

  console.log("[scale-lock] Corre√ß√£o aplicada, fator:", correction.toFixed(2));
});
</script>
</body>
</html>